<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WAV → DWP Chromatic Slicer</title>
<script src="https://unpkg.com/wavesurfer.js"></script>
<script type="module" src="app.js"></script>
<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background:#121212;
    color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:16px;
}
h1{ font-size:1.6em; margin-bottom:8px; }
.controls{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:16px; }
button{
    background:#1db954; color:#000; border:none; border-radius:6px;
    padding:8px 12px; font-weight:bold; cursor:pointer; transition:all 0.2s;
}
button:hover{ transform:scale(1.05); background:#17c144; }
input, select{ padding:6px 10px; border-radius:6px; border:none; background:#1e1e1e; color:#fff; }
#waveform{ width:100%; max-width:800px; height:180px; background:#1e1e1e; border-radius:8px; position:relative; margin-bottom:12px; overflow:hidden; box-shadow:0 4px 10px rgba(0,0,0,0.5);}
.marker{ position:absolute; width:3px; background:#ff3d3d; height:100%; cursor:pointer; touch-action:none; border-radius:2px; }
.marker-label{ position:absolute; top:-18px; left:-5px; font-size:0.75em; color:#ff3d3d; }
#markersList{ display:block; margin-top:8px; font-size:0.9em; color:#aaa; }
footer{ margin-top:24px; font-size:0.8em; color:#555; text-align:center; }
</style>
</head>
<body>

<h1>WAV → DWP Chromatic Slicer</h1>

<div class="controls">
    <input type="file" id="file" accept="audio/wav">
    <select id="mode">
        <option value="equal">Auto Slice</option>
        <option value="manual">Manual Markers</option>
    </select>
    <select id="notesMode">
        <option value="chromatic">Chromatic Notes</option>
        <option value="velocityLayers">Velocity Layers</option>
    </select>
    <button id="load">Load</button>
    <button id="play">Play/Pause</button>
    <button id="exportDwp">Export .dwp</button>
</div>

<div id="waveform"></div>
<span>Markers: <span id="markersList">none</span></span>

<footer>
    Drag markers to adjust, double-tap to remove. Auto Slice splits waveform evenly.<br>
    Notes Mode: Chromatic = each slice gets one note; Velocity Layers = multiple velocities per slice.
</footer>

</body>
</html>
